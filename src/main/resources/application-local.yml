# Local environment â€” works with Docker or local Postgres
# Set DB_HOST=postgres for Docker Compose, or leave unset to use localhost
spring:
  datasource:
    url: jdbc:postgresql://${DB_HOST:localhost}:5432/filestorage
    username: postgres
    password: postgres
    driver-class-name: org.postgresql.Driver
  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: true
    properties:
      hibernate:
        format_sql: true

  flyway:
    enabled: true
    locations: classpath:db/migration

storage:
  type: LOCAL
  local:
    base-dir: ./storage

server:
  port: 8080

# Admin endpoint for local testing only
admin:
  secret: admin123


# NOTE: if you want to use an in-memory H2 DB for quick local testing instead of Postgres,
# you can uncomment the section below and run with the 'local' profile.
#
# spring:
#   datasource:
#     url: jdbc:h2:mem:filestorage;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
#     username: sa
#     password:
#     driver-class-name: org.h2.Driver
#   jpa:
#     hibernate:
#       ddl-auto: update
#     show-sql: true
#     properties:
#       hibernate:
#         format_sql: true
